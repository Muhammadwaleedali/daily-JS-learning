name: Daily JS Learning

on:
  schedule:
    - cron: '0 9 * * *'  # Runs daily at 9 AM UTC
  workflow_dispatch:  # Manual trigger

jobs:
  add-daily-files:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Create daily JS files
      run: |
        DATE=$(date +%Y%m%d)
        
        # Array of JS topics
        topics=(
          "JavaScript Hoisting and Temporal Dead Zone"
          "Event Loop and Call Stack"
          "Prototype Chain and Inheritance"
          "Memory Management and Garbage Collection"
          "Regular Expressions in JavaScript"
          "JSON Methods and Data Parsing"
          "Local Storage and Session Storage"
          "Fetch API and HTTP Requests"
          "JavaScript Debugging Techniques"
          "Performance Optimization Tips"
        )
        
        comments=(
          "// Hoisting moves declarations to top of scope\n// let/const have temporal dead zone, var doesn't"
          "// Event loop handles async operations\n// Call stack executes synchronous code"
          "// Every object has __proto__ property\n// Constructor functions create prototype chain"
          "// JavaScript uses mark-and-sweep garbage collection\n// Avoid memory leaks with proper cleanup"
          "// RegExp objects test and match string patterns\n// Use flags like g, i, m for different behaviors"
          "// JSON.parse() converts string to object\n// JSON.stringify() converts object to string"
          "// localStorage persists data across sessions\n// sessionStorage clears when tab closes"
          "// fetch() returns a Promise for HTTP requests\n// Use .then() or async/await for responses"
          "// console.log(), debugger, and browser DevTools\n// Use breakpoints and step-through debugging"
          "// Minimize DOM manipulation and use event delegation\n// Debounce/throttle expensive operations"
        )
        
        for i in {0..9}; do
          filename="day${DATE}_${i}.js"
          echo -e "${comments[$i]}" > "$filename"
          git add "$filename"
          git commit -m "Add daily learning: ${topics[$i]} - Day ${DATE} file $((i+1))"
        done
    
    - name: Push changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git push